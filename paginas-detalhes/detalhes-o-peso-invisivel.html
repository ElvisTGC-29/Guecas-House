<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>O Peso Invisível — Detalhes | Guecas House</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/01-detalhes.css" />
  <link rel="stylesheet" href="../css/pdf-viewer.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="../script.js" defer></script>
</head>
<body>
  <header>
    <div class="wrapper navbar">
      <a href="../index.html" class="brand">
        <div class="brand-logo"></div>
        <span>Guecas House</span>
        <span style="font-weight:400; font-size:0.7rem;">Editorial Seal</span>
      </a>

      <nav>
        <button class="nav-toggle" aria-label="Abrir menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <ul class="nav-links">
          <button class="nav-close" type="button" aria-label="Fechar menu">×</button>

          <li><a href="../index.html">Início</a></li>
          <li><a href="../sobre.html">Sobre</a></li>
          <li><a href="../colecoes.html" class="active">Acervo</a></li>
          <li><a href="../contato.html">Contato</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HERO DE DETALHES -->
  <section class="detail-hero">
    <div class="wrapper">
      <div class="detail-cover">
        <div class="detail-badge">Série A Era da Mente Cansada</div>
        <div class="detail-cover-card">
          <img src="../arquivos/Imagens/o peso invisivel.jpg" alt="Capa do ebook O Peso Invisível">
        </div>
      </div>

      <div class="detail-content">
        <p class="detail-meta-top">Ebook digital em PDF • Guecas House</p>
        <h1 class="detail-title">O Peso Invisível</h1>
        <p class="detail-subtitle">
          A fadiga emocional da era digital não aparece em exames — mas corrói em silêncio.
        </p>

        <p class="detail-highlight">
          <strong>Você não está quebrado.</strong> Só está carregando mais peso interno do que o seu dia deixa transparecer.
          Este ebook é um mapa rápido e claro para quem vive cansado sem conseguir explicar.
        </p>

        <p class="detail-meta">
          <span>Leitura em menos de 20 minutos</span>
          <span>32 a 45 páginas em PDF</span>
          <span>Download imediato após a compra</span>
        </p>

        <div class="detail-purchase">
          <div class="price-badge">
            <div class="price">R$ 19,90</div>
          </div>
          <div class="purchase-note">Pagamento único — download imediato</div>
        </div>

        <div class="detail-buttons">
          <button id="open-pdf-preview-btn" class="btn btn-outline">
            Ler prévia
          </button>
          <a href="https://pay.kiwify.com.br/SEU_LINK_PESO" target="_blank" class="btn btn-primary">
            Comprar agora
          </a>
        </div>

        <p class="detail-price-note">
          <strong>Pagamento único.</strong> Você recebe o PDF no e-mail assim que a compra for confirmada.
        </p>
      </div>
    </div>
  </section>

  <!-- SEÇÃO DE TEXTO / CONTEÚDO -->
  <section class="detail-section">
    <div class="wrapper wrapper-narrow">
      <h2>Quando o cansaço não é só físico.</h2>

      <p class="detail-lead">
        Você acorda cansado. Vai dormir cansado. E no meio disso tudo tenta parecer bem.
        O corpo pesa mesmo parado. A mente não desliga. As pequenas tarefas parecem montanhas.
        E a culpa aparece até quando você não fez nada “de errado”.
        <br><br>
        As pessoas dizem que é falta de força de vontade. Que você precisa ser mais organizado.
        Que basta “descansar no fim de semana”. Mas, lá no fundo, você sabe que o buraco é outro:
        é como se algo estivesse drenando sua energia silenciosamente, todos os dias, sem pedir permissão.
        <br><br>
        <strong>O Peso Invisível</strong> foi escrito para dar nome a isso. Para traduzir em palavras aquilo que você sente
        mas ainda não conseguiu explicar — nem para os outros, nem para você mesmo.
      </p>

      <h2>Dentro do ebook, você vai descobrir:</h2>

      <div class="detail-grid-lista">
        <ul>
          <li>Por que você sente cansaço mesmo sem esforço físico — e por que isso não é “preguiça”.</li>
          <li>Como o mundo moderno sequestra sua energia mental sem que você perceba.</li>
          <li>O ciclo silencioso da fadiga emocional — e como começar a quebrar esse padrão.</li>
          <li>Técnicas simples de menos de 2 minutos para aliviar a sobrecarga interna nos piores dias.</li>
        </ul>
        <ul>
          <li>Como interpretar os sinais físicos do corpo quando a mente não consegue mais falar.</li>
          <li>Formas práticas de recuperar pequenos espaços de descanso real na rotina.</li>
          <li>Como falar sobre o que você sente sem parecer fraco, dramático ou exagerado.</li>
          <li>Uma nova forma de enxergar descanso: não como culpa, mas como sobrevivência.</li>
        </ul>
      </div>

      <div class="detail-tech-block">
        <h2>Informações técnicas</h2>
        <div class="detail-tech-grid">
          <div class="detail-tech-item">
            <dt>Formato do arquivo</dt>
            <dd>PDF digital (compatível com celular, tablet e computador).</dd>
          </div>
          <div class="detail-tech-item">
            <dt>Número de páginas</dt>
            <dd>Entre 32 e 45 páginas, dependendo do dispositivo.</dd>
          </div>
          <div class="detail-tech-item">
            <dt>Tempo médio de leitura</dt>
            <dd>Menos de 20 minutos, com linguagem clara e direta.</dd>
          </div>
          <div class="detail-tech-item">
            <dt>Série</dt>
            <dd><strong>A Era da Mente Cansada</strong> — volume 1.</dd>
          </div>
          <div class="detail-tech-item">
            <dt>Entrega</dt>
            <dd>Download imediato após a confirmação do pagamento.</dd>
          </div>
          <div class="detail-tech-item">
            <dt>Indicação</dt>
            <dd>Pessoas que sentem cansaço constante, mente acelerada e dificuldade para descansar de verdade.</dd>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- OUTROS TÍTULOS -->
  <section class="detail-carousel">
    <div class="wrapper wrapper-narrow">
      <h2>Outros títulos da coleção</h2>
      <div class="detail-carousel-row">
        <div class="detail-carousel-card">
          <a href="detalhes-o-peso-invisivel.html">
            <img src="../arquivos/Imagens/dd.jpg" alt="O Peso Invisível">
          </a>
          <span>O Peso Invisível</span>
        </div>
        <div class="detail-carousel-card">
          <a href="detalhes-o-corpo-que-nao-desliga.html">
            <img src="../arquivos/Imagens/placeholder-corpo.jpg" alt="O Corpo que Não Desliga">
          </a>
          <span>O Corpo que Não Desliga</span>
        </div>
        <div class="detail-carousel-card">
          <a href="detalhes-o-preco-da-vigilia.html">
            <img src="../arquivos/Imagens/placeholder-vigilia.jpg" alt="O Preço da Vigília">
          </a>
          <span>O Preço da Vigília</span>
        </div>
      </div>
    </div>
  </section>

  <!-- MODAL DE PRÉ-VISUALIZAÇÃO PDF -->
  <div id="pdf-modal" class="pdf-modal">
    <div class="pdf-modal-content">
      <div class="pdf-modal-toolbar">
        <div class="page-nav-top">
          <button id="modal-pdf-prev-btn" class="pdf-control-btn" title="Página anterior">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <div class="page-counter">
            <input type="number" id="modal-pdf-page-input" class="page-input" min="1" value="1">
            <span> / <span id="modal-pdf-total-pages">0</span></span>
          </div>
          <button id="modal-pdf-next-btn" class="pdf-control-btn" title="Próxima página">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>

        <div class="pdf-pages-info">
          <span class="pages-badge"><span id="modal-pdf-total-pages">0</span> páginas</span>
        </div>
        
        <div class="toolbar-right">
          <button id="modal-pdf-fullscreen-exit-btn" class="pdf-control-btn" title="Fechar">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="pdf-modal-canvas-wrapper">
        <div class="pdf-loading" id="modal-pdf-loading">
          <div class="spinner"></div>
          <p>Carregando documento...</p>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-inner">
      <div class="footer-brand">
        <span>© Guecas House — Editorial Seal.</span>
        <span>Todos os direitos reservados.</span>
      </div>
      <div class="footer-links">
        <a href="../colecoes.html">Acervo</a>
        <a href="../contato.html">Contato</a>
      </div>
    </div>
  </footer>
  
  <script>
    // ========= PDF VIEWER INITIALIZATION =========
    const pdfjsLib = window['pdfjs-dist/build/pdf'];
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    
    const pdfUrl = '../arquivos/previas/previa-o-peso-invisivel.pdf';
    let modalPdfDoc = null;
    const pdfModal = document.getElementById('pdf-modal');
    const modalLoadingDiv = document.getElementById('modal-pdf-loading');
    let isLoadingPDF = false;
    let pagesContainer = null;
    
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    // Renderizar todas as páginas em scroll contínuo
    function renderAllPages() {
      if (!modalPdfDoc || isLoadingPDF) return;
      
      isLoadingPDF = true;
      modalLoadingDiv.style.display = 'flex';
      
      // Criar container para todas as páginas
      const canvasWrapper = document.querySelector('.pdf-modal-canvas-wrapper');
      pagesContainer = document.querySelector('.pdf-pages-container');
      if (!pagesContainer) {
        pagesContainer = document.createElement('div');
        pagesContainer.className = 'pdf-pages-container';
        canvasWrapper.appendChild(pagesContainer);
      }
      pagesContainer.innerHTML = '';
      
      const totalPages = modalPdfDoc.numPages;
      let pagesRendered = 0;
      const scale = isMobile ? 1.2 : 1.5;
      
      const renderPageInContainer = (pageNum) => {
        modalPdfDoc.getPage(pageNum).then(page => {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          const viewport = page.getViewport({ scale });
          
          canvas.height = viewport.height;
          canvas.width = viewport.width;
          canvas.className = 'pdf-page';
          
          page.render({
            canvasContext: ctx,
            viewport: viewport
          }).promise.then(() => {
            pagesContainer.appendChild(canvas);
            pagesRendered++;
            
            if (pagesRendered === totalPages) {
              modalLoadingDiv.style.display = 'none';
              isLoadingPDF = false;
              document.getElementById('modal-pdf-total-pages').textContent = totalPages;
            }
          });
        }).catch(err => {
          console.error('Erro ao renderizar página:', err);
        });
      };
      
      for (let i = 1; i <= totalPages; i++) {
        renderPageInContainer(i);
      }
    }
    
    // Eventos do modal
    pdfModal.addEventListener('click', (e) => {
      if (e.target === pdfModal) {
        pdfModal.classList.remove('active');
      }
    });
    
    // Fechar com ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && pdfModal.classList.contains('active')) {
        pdfModal.classList.remove('active');
      }
    });
    
    // Botão fullscreen exit
    document.getElementById('modal-pdf-fullscreen-exit-btn').addEventListener('click', () => {
      pdfModal.classList.remove('active');
    });
    
    // Abrir prévia ao clicar em "Ler prévia"
    document.getElementById('open-pdf-preview-btn').addEventListener('click', () => {
      pdfModal.classList.add('active');
      if (!modalPdfDoc) {
        pdfjsLib.getDocument(pdfUrl).promise.then(doc => {
          modalPdfDoc = doc;
          renderAllPages();
        }).catch(err => {
          modalLoadingDiv.innerHTML = '<p style="color: rgba(255,255,255,0.7);">Erro ao carregar o PDF. Tente novamente mais tarde.</p>';
          console.error('Erro ao carregar PDF:', err);
        });
      } else {
        if (pagesContainer) {
          modalLoadingDiv.style.display = 'none';
        }
      }
    });
    
    // Desabilitar print
    window.addEventListener('beforeprint', (e) => {
      e.preventDefault();
    });
    
    // Desabilitar seleção de texto no canvas
    const modalCanvas = document.getElementById('modal-pdf-canvas');
    modalCanvas.addEventListener('selectstart', (e) => e.preventDefault());
    modalCanvas.addEventListener('contextmenu', (e) => e.preventDefault());
    
    // Desabilitar Ctrl+C, Ctrl+X, Ctrl+P
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'x' || e.key === 'p')) {
        e.preventDefault();
      }
    });
  </script>
  <script>
    // Mudar cor da navbar conforme scroll - fundo claro no hero escuro com transição
    const header = document.querySelector('header');
    const detailHero = document.querySelector('.detail-hero');
    
    // Adicionar transição suave ao header
    header.style.transition = 'background 0.3s ease, border-color 0.3s ease';
    
    function updateHeaderColor() {
      if (!detailHero) return;
      
      const heroRect = detailHero.getBoundingClientRect();
      
      // Se o hero está visível na tela (parte dele acima do header), navbar clara
      if (heroRect.bottom > 64) {
        header.style.background = '#f3f4ff';
        header.style.borderBottomColor = 'rgba(148, 163, 184, 0.2)';
        
        // Mudar cor do texto para escuro com transição
        const brand = header.querySelector('.brand');
        const brandSpans = header.querySelectorAll('.brand span');
        const links = header.querySelectorAll('.nav-links a');
        
        if (brand) {
          brand.style.transition = 'color 0.3s ease';
          brand.style.color = '#0f172a';
        }
        brandSpans.forEach(span => {
          span.style.transition = 'color 0.3s ease';
          span.style.color = '#0f172a';
        });
        links.forEach(link => {
          link.style.transition = 'color 0.3s ease';
          link.style.color = 'rgba(15, 23, 42, 0.8)';
          // Mudar cor do ::after para gradiente escuro
          link.style.setProperty('--link-underline-color', 'rgba(15, 23, 42, 0.8)', 'important');
          link.style.setProperty('--link-underline-color-2', 'rgba(15, 23, 42, 0.4)', 'important');
        });
      } else {
        // Saiu da seção hero, volta para cor escura
        header.style.background = '#020617';
        header.style.borderBottomColor = 'rgba(48, 79, 254, 0.2)';
        
        // Mudar cor do texto para branco com transição
        const brand = header.querySelector('.brand');
        const brandSpans = header.querySelectorAll('.brand span');
        const links = header.querySelectorAll('.nav-links a');
        
        if (brand) {
          brand.style.transition = 'color 0.3s ease';
          brand.style.color = '#ffffff';
        }
        brandSpans.forEach(span => {
          span.style.transition = 'color 0.3s ease';
          span.style.color = '#ffffff';
        });
        links.forEach(link => {
          link.style.transition = 'color 0.3s ease';
          link.style.color = 'rgba(255, 255, 255, 0.8)';
          // Mudar cor do ::after para gradiente branco
          link.style.setProperty('--link-underline-color', '#ffffff', 'important');
          link.style.setProperty('--link-underline-color-2', 'rgba(255, 255, 255, 0.6)', 'important');
        });
      }
    }
    
    window.addEventListener('scroll', updateHeaderColor);
    updateHeaderColor();
  </script>
  <style>
    .nav-links a::after {
      background: linear-gradient(90deg, var(--link-underline-color, #ffffff), var(--link-underline-color-2, rgba(255, 255, 255, 0.6))) !important;
      transition: background 0.3s ease;
    }
  </style>
</body>
</html>
